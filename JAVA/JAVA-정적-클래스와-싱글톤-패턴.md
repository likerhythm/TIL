# 정적 클래스와 싱글톤 패턴

## 모든 변수와 메서드가 static인 클래스(이하 정적 클래스)는 싱글톤 패턴을 대신할 수 없을까

static 개념과 싱글톤 패턴 개념을 동시에 공부한 시기가 있었는데 그때 문득 든 생각입니다. 싱글톤 패턴의 목적이 시스템 상에서 사용되는 객체가 단 하나만 존재하도록 강제하기 위함인데, 애초에 정적으로 선언된 클래스는 메모리의 Method 영역에 단 하나만 존재하고 또한 객체 생성도 이루어지지 않으니 오히려 좋지 않을까라는 생각이 들었습니다. 그래서 왜 정적 클래스를 사용하지 않고 싱글톤 패턴을 따로 두었는지 관련 자료를 찾아보며 생각해 봤습니다.

### 생각1: 정적 클래스를 상속 받은 클래스는 부모 클래스(정적 클래스)의 메서드를 오버라이딩할 수 없기 때문에 싱글톤 패턴이 필요하다.
- 싱글톤 패턴은 생성자를 `private` 으로 선언하기에 자식 클래스를 가질 수 없다.
- 만약 생성자를 외부에 노출하지 않으면서 자식 클래스를 허용하기 위해 생성자를 `protected` 로 선언한다면?
    - 이 경우 싱글톤 패턴은 자식 클래스를 가질 수 있다. 하지만 자식 클래스는 싱글톤 패턴과 전혀 관련 없는 클래스가 된다.
    - 왜냐하면 싱글톤 패턴의 인스턴스 생성자는 정적 메서드이기 때문에 자식 클래스에서 접근하더라도 부모 클래스의 정적 메서드에 접근해야 하기 때문.
        - 부모의 정적 메서드에 접근하면 반환되는 객체는 자식 클래스가 아니라 부모 클래스의 객체이다.
    - 즉, 자식 클래스는 싱글톤 패턴과 아무런 관련이 없는 클래스이다. 이 말은 상속을 사용할 이유가 없다는 말이기 때문에 싱글톤 패턴을 상속 받는 클래스를 정의하는 상황은 매우 적을 것이다.
- 즉, 싱글톤 패턴은 자식 클래스를 가지게 할 수 있지만 그럴 이유가 없다.
- 그렇기 때문에 ‘정적 클래스의 자식 클래스가 부모 클래스의 메서드를 오버라이드 할 수 없기 때문에 싱글톤 패턴을 사용한다는 것’은 싱글톤 패턴 존재의 이유가 되지 못한다.

### 생각2: 정적 클래스는 다른 클래스를 상속할 수 없다.
- 부모 클래스가 단 하나의 non-static 변수/메서드를 가지고 있다면 자식 클래스 또한 non-static 클래스가 돼버리기 때문이다. → 이 경우 시스템 상에서 하나로 관리되던 정적 클래스는 더이상 정적 클래스가 아니게 되고, 객체를 생성해야 하는 상황이 생기므로 차라리 싱글톤 패턴을 쓰는 게 좋다.

### 생각3: 동시성 문제?
- static 클래스는 모든 변수와 메서드에 대해 스레드 안정성을 보장해야 한다.
- 싱글톤 패턴은 객체를 가져올 때에만 스레드 안정성을 확보하면 객체 전체에 대한 안정성을 보장할 수 있기 때문에 더 간편하다.

### 생각4: 의존성 주입
- 정적 클래스와 싱글톤 패턴은 모두 시스템의 결합도를 높인다. 하지만 싱글톤 패턴은 생성자를 통해 의존성을 주입할 수 있기 때문에 결합도를 조금은 낮출 수 있다.

## 결론
단순 유틸리티 성격이거나 클래스가 상태를 가지지 않는 경우에는 static 클래스가 유리할 수 있다. 하지만 상태를 갖거나 스레드 안정성이 필요한 경우, 그리고 상속과 같은 객체 지향의 특징을 살리고 싶은 경우에는 싱글톤 패턴이 필요하다. 따라서 정적 클래스와 싱글톤 패턴은 상황에 맞게 사용해야 한다. 여담으로 싱글톤 패턴은 상태를 가지기 때문에 단위 테스트에 방해가 될 수 있다. 너무 많이 사용하진 말자.

